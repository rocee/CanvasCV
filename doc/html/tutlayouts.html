---
layout: reference
sitemap: false
---
<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtmlcharset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CanvasCV: Auto widget layouts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px">
  <td id="projectalign" style="padding-left: 0.5em">
   <div id="projectname">CanvasCV
   &#160<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Auto widget layouts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#layouts_s1">Center text on the screen</a></li>
<li class="level1"><a href="#layouts_s2">A simple buttons group</a></li>
<li class="level1"><a href="#layouts_s3">A full dialog</a></li>
</ul>
</div>
<div class="textblock"><p>In the previous tutorials we've positioned the Widgets independetly.</p>
<p>In many cases you want a set of widgets to be located together in a certain order.</p>
<p>For this you need AutoLayout derived classes:</p><ul>
<li><a class="el" href="classcanvascv_1_1HorizontalLayout.html" title="The HorizontalLayout class. ">canvascv::HorizontalLayout</a></li>
<li><a class="el" href="classcanvascv_1_1VerticalLayout.html" title="The VerticalLayout class. ">canvascv::VerticalLayout</a></li>
<li><a class="el" href="classcanvascv_1_1HFrame.html" title="The HFrame class. ">canvascv::HFrame</a></li>
<li><a class="el" href="classcanvascv_1_1VFrame.html" title="The VFrame class. ">canvascv::VFrame</a></li>
</ul>
<p>In this tutorial we'll return to some previous tutorial code and see how to do it in a layout. Then we'll write a simple form which gets inputs from the user.</p>
<p>Notice along the tutorial the usage of anchors and and stretching.</p>
<p>For anchors, you have 2 different APIs:</p><ul>
<li><a class="el" href="classcanvascv_1_1Widget.html#a69f455f7fbf67f636ee1155795057b87" title="setFlowAnchor set internal widget alignment and direction of growth ">canvascv::Widget::setFlowAnchor()</a> - used internally by the widget to determine into which direction to grow.</li>
<li><a class="el" href="classcanvascv_1_1Widget.html#a7180ca0054874c853e805e7842741596" title="setLayoutAnchor sets the anchor for using in the Layout we&#39;re in ">canvascv::Widget::setLayoutAnchor()</a>- used by the layout holding this widget for alignments.</li>
</ul>
<p>For stretching, you have 2 different APIs:</p><ul>
<li><a class="el" href="classcanvascv_1_1Widget.html#a7cdddebd755c499712793f727a057733" title="set if the Layout we&#39;re in should stretch us in the X direction (and calls setStretchXToParent(false)...">canvascv::Widget::setStretchX()</a> and <a class="el" href="classcanvascv_1_1Widget.html#a3ef50b76d33c332cea4e632346b6df33" title="set if the Layout we&#39;re in should stretch us in the Y direction (and calls setStretchYToParent(false)...">canvascv::Widget::setStretchY()</a>, which tells if we want to be equal in width/height to the largest widget in our layout.</li>
<li><a class="el" href="classcanvascv_1_1Widget.html#a7b1ed6190950de22565c244f5aac49a4" title="set if this widget streches to parent layout width (and calls setStretchX(false)) ...">canvascv::Widget::setStretchXToParent()</a> and <a class="el" href="classcanvascv_1_1Widget.html#a825028e2405bfdf9d92d372e60585703" title="set if this widget streches to parent layout height (and calls setStretchY(false)) ...">canvascv::Widget::setStretchYToParent()</a>, which tells if we want to be streched to the full width/height of our layout.</li>
</ul>
<h1><a class="anchor" id="layouts_s1"></a>
Center text on the screen</h1>
<p>In the tutorial <a class="el" href="tutscreentext.html#screentext_s2_3">Displaying text where ever you want</a> we created a <em>Text</em> widget and manually tried to center it on the screen.</p>
<p>To center it vertically and horizontally, you would use 2 layout managers - <a class="el" href="classcanvascv_1_1VerticalLayout.html" title="The VerticalLayout class. ">canvascv::VerticalLayout</a> and <a class="el" href="classcanvascv_1_1HorizontalLayout.html" title="The HorizontalLayout class. ">canvascv::HorizontalLayout</a>.</p>
<p>The top layout should stretch to the full dimensions of the screen (because we want <em>CENTER</em> to be relative to that). Here we choose a <em>VerticalLayout</em>, in which widgets are layered automatically veritcally, but horizontally you can specify where to put your widget.</p>
<p>Now we'll add a <em>HorizontalLayout</em> to the above layout and request to be anchored to the <em>CENTER</em>.</p>
<p>In the <em>HorizontalLayout</em>, widgets are layered automatically horizontally, but vertically you can specify where to put your widget. This widget will strectch in the Y direction, so <em>CENTER</em> in it will be relative to the height of the image.</p>
<p>So finally we'll add our <em>Text</em>, just like before, but now instead of adding it to the <em>Canvas</em>, we'll add it to the above <em>HorizontalLayout</em>, and ask to be anchored to the <em>CENTER</em> of it.</p>
<p>So the <em>VerticalLayout</em> will <em>CENTER</em> the <em>HorizontalLayout</em> and it will <em>CENTER</em> the <em>Text</em>. Since the layouts are stretching to the full dimension of the image, it will always be centered.</p>
<p>The added/changed code is much shorter than the explanation: </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line"><span class="keyword">auto</span> vLayout = <a class="code" href="classcanvascv_1_1VerticalLayout.html#a3e0ae249db062663815d2d822e178dd3">VerticalLayout::create</a>(c);</div><div class="line">vLayout-&gt;setStretchXToParent(<span class="keyword">true</span>);</div><div class="line">vLayout-&gt;setStretchYToParent(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="keyword">auto</span> hLayout = <a class="code" href="classcanvascv_1_1HorizontalLayout.html#aea31dd787cbf985687ead6a55efa1839">HorizontalLayout::create</a>(*vLayout);</div><div class="line">hLayout-&gt;setLayoutAnchor(<a class="code" href="classcanvascv_1_1Widget.html#a98ca3c300ba50b316fa5a1d300456abea2cd62693af40f3c5f559a07d6a61a55d">Widget::CENTER</a>);</div><div class="line">hLayout-&gt;setStretchYToParent(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="keyword">auto</span> txt = <a class="code" href="classcanvascv_1_1Text.html#a7f3552263b6f185f78d90549e7ac38f7">Text::create</a>(*hLayout, <span class="stringliteral">&quot;Target Acquired!&quot;</span>);</div><div class="line">txt-&gt;setLayoutAnchor(<a class="code" href="classcanvascv_1_1Widget.html#a98ca3c300ba50b316fa5a1d300456abea2cd62693af40f3c5f559a07d6a61a55d">Widget::CENTER</a>);</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div></div><!-- fragment --><p>This is the full code: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;canvascv/canvas.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/text.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/verticallayout.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/horizontallayout.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> help(<a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> &amp;c)</div><div class="line">{</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">bool</span> showHelp = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">string</span> helpMsg =</div><div class="line">            <span class="stringliteral">&quot;Usage:\n&quot;</span></div><div class="line">            <span class="stringliteral">&quot;=====\n&quot;</span></div><div class="line">            <span class="stringliteral">&quot;h: toggle usage message\n&quot;</span></div><div class="line">            <span class="stringliteral">&quot;*: toggle canvas on/off\n&quot;</span></div><div class="line">            <span class="stringliteral">&quot;q: exit&quot;</span>;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (showHelp) c.<a class="code" href="classcanvascv_1_1Canvas.html#aaedea276b82a8a4cfc0895ae81113cfd">setScreenText</a>(helpMsg);</div><div class="line">    <span class="keywordflow">else</span> c.<a class="code" href="classcanvascv_1_1Canvas.html#aaedea276b82a8a4cfc0895ae81113cfd">setScreenText</a>(<span class="stringliteral">&quot;&quot;</span>);</div><div class="line"></div><div class="line">    showHelp = ! showHelp;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    <span class="keywordflow">if</span> (! argc)</div><div class="line">    {</div><div class="line">        <a class="code" href="classcanvascv_1_1Canvas.html#add93c0d5cc1e9b49f97510952a8a1961">Canvas::fatal</a>(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -1);</div><div class="line">    }</div><div class="line"></div><div class="line">    Mat image = imread(argv[0]);</div><div class="line">    <span class="keywordflow">if</span> (image.empty())</div><div class="line">    {</div><div class="line">        <a class="code" href="classcanvascv_1_1Canvas.html#add93c0d5cc1e9b49f97510952a8a1961">Canvas::fatal</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -2);</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;LayoutTxt&quot;</span>, image.size());</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#ae68d3277e738d349232400b38f0e5f9e">enableScreenText</a>(); <span class="comment">// see it&#39;s documentation</span></div><div class="line"></div><div class="line">    help(c);</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;LayoutTxt&quot;</span>, WINDOW_AUTOSIZE); <span class="comment">// disable mouse resize</span></div><div class="line"></div><div class="line">    <span class="keyword">auto</span> vLayout = <a class="code" href="classcanvascv_1_1VerticalLayout.html#a3e0ae249db062663815d2d822e178dd3">VerticalLayout::create</a>(c);</div><div class="line">    vLayout-&gt;setStretchXToParent(<span class="keyword">true</span>);</div><div class="line">    vLayout-&gt;setStretchYToParent(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> hLayout = <a class="code" href="classcanvascv_1_1HorizontalLayout.html#aea31dd787cbf985687ead6a55efa1839">HorizontalLayout::create</a>(*vLayout);</div><div class="line">    hLayout-&gt;setLayoutAnchor(<a class="code" href="classcanvascv_1_1Widget.html#a98ca3c300ba50b316fa5a1d300456abea2cd62693af40f3c5f559a07d6a61a55d">Widget::CENTER</a>);</div><div class="line">    hLayout-&gt;setStretchYToParent(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> txt = <a class="code" href="classcanvascv_1_1Text.html#a7f3552263b6f185f78d90549e7ac38f7">Text::create</a>(*hLayout, <span class="stringliteral">&quot;Target Acquired!&quot;</span>);</div><div class="line">    txt-&gt;setLayoutAnchor(<a class="code" href="classcanvascv_1_1Widget.html#a98ca3c300ba50b316fa5a1d300456abea2cd62693af40f3c5f559a07d6a61a55d">Widget::CENTER</a>);</div><div class="line">    txt-&gt;setFontHeight(50);</div><div class="line">    txt-&gt;setOutlineColor(<a class="code" href="classcanvascv_1_1Colors.html#a10aff24c53edf45b038d0636b061f9c2">Colors::Red</a>);</div><div class="line">    txt-&gt;setThickness(2);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    Mat out;</div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        <span class="keywordflow">switch</span> (key)</div><div class="line">        {</div><div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div><div class="line">            help(c);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div><div class="line">            c.<a class="code" href="classcanvascv_1_1Canvas.html#aba149ea25c6cdad2673133a060355954">setOn</a>(! c.<a class="code" href="classcanvascv_1_1Canvas.html#afe6a2955a5bbee8903350b4fba3f4473">getOn</a>());</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        c.<a class="code" href="classcanvascv_1_1Canvas.html#a018c66e277de7904b8146ea3f3feebdd">redrawOn</a>(image, out);  <span class="comment">// draw the canvas on the image copy</span></div><div class="line"></div><div class="line">        imshow(<span class="stringliteral">&quot;LayoutTxt&quot;</span>, out);</div><div class="line"></div><div class="line">        key = c.<a class="code" href="classcanvascv_1_1Canvas.html#a59397db05f5d9e45264f626f6a2ae528">waitKeyEx</a>(); <span class="comment">// GUI and callbacks happen here</span></div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>);</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Notes:</p><ul>
<li>To expand the widget to the full extent of it's parent layout use <a class="el" href="classcanvascv_1_1Widget.html#a7b1ed6190950de22565c244f5aac49a4" title="set if this widget streches to parent layout width (and calls setStretchX(false)) ...">canvascv::Widget::setStretchXToParent()</a> with <em>true</em> to match the layout width and <a class="el" href="classcanvascv_1_1Widget.html#a825028e2405bfdf9d92d372e60585703" title="set if this widget streches to parent layout height (and calls setStretchY(false)) ...">canvascv::Widget::setStretchYToParent()</a> with <em>true</em> to match the layout height.</li>
<li>Here is a possible outcome of this code: <div class="image">
<img src="tut_layout_txt.jpg" alt="tut_layout_txt.jpg"/>
</div>
 <br />
</li>
</ul>
<h1><a class="anchor" id="layouts_s2"></a>
A simple buttons group</h1>
<p>Here we're going to create some buttons in a group.</p>
<p>The buttons are going to be evenly spaced in a <em>VerticalLayout</em>.</p>
<p>The code is simple: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;canvascv/canvas.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/button.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/verticallayout.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    <span class="keywordflow">if</span> (! argc)</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -1);</div><div class="line">    }</div><div class="line"></div><div class="line">    Mat image = imread(argv[0]);</div><div class="line">    <span class="keywordflow">if</span> (image.empty())</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -2);</div><div class="line">    }</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;LayoutButtons&quot;</span>, WINDOW_AUTOSIZE); <span class="comment">// disable mouse resize</span></div><div class="line">    <a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;LayoutButtons&quot;</span>, image.size());</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#acf6e5d4b40aec610b0dc8c4f6bf93ac1">setMouseCallback</a>();</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a402c43a42c0089c48a96e5303c1c1fe8">enableStatusMsg</a>();</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> vLayout = VerticalLayout::create(c, {100,100});</div><div class="line"></div><div class="line">    Button::create(*vLayout,        <span class="comment">// on the canvas</span></div><div class="line">                   <span class="stringliteral">&quot;First Button&quot;</span>,  <span class="comment">// displayed on button</span></div><div class="line">                   <span class="stringliteral">&quot;one&quot;</span>);          <span class="comment">// displayed during mouse hover</span></div><div class="line"></div><div class="line">    Button::create(*vLayout,        <span class="comment">// on the canvas</span></div><div class="line">                   <span class="stringliteral">&quot;Second Button&quot;</span>, <span class="comment">// displayed on button</span></div><div class="line">                   <span class="stringliteral">&quot;two&quot;</span>);          <span class="comment">// displayed during mouse hover</span></div><div class="line"></div><div class="line">    Button::create(*vLayout,        <span class="comment">// on the canvas</span></div><div class="line">                   <span class="stringliteral">&quot;Third Button&quot;</span>,  <span class="comment">// displayed on button</span></div><div class="line">                   <span class="stringliteral">&quot;three&quot;</span>);        <span class="comment">// displayed during mouse hover</span></div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a441c5882c7ebebd454a306b3c3478ae7">setImage</a>(image);</div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        key = c.<a class="code" href="classcanvascv_1_1Canvas.html#a59397db05f5d9e45264f626f6a2ae528">waitKeyEx</a>(); <span class="comment">// GUI and callbacks happen here</span></div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>);</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Notes:</p><ul>
<li>When creating widgets the first parameter is the containing layout (the <em>Canvas</em> is also a <em>Layout</em>).</li>
<li>As you can see, there is a possible problem with this code - the length of the buttons: <div class="image">
<img src="tut_layout_buttons1.jpg" alt="tut_layout_buttons1.jpg"/>
</div>
</li>
<li>To fix this, add these lines after the creation of the buttons: <div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line">vLayout-&gt;at&lt;<a class="code" href="classcanvascv_1_1Button.html">Button</a>&gt;(0)-&gt;setStretchX(<span class="keyword">true</span>);</div><div class="line">vLayout-&gt;at&lt;<a class="code" href="classcanvascv_1_1Button.html">Button</a>&gt;(1)-&gt;setStretchX(<span class="keyword">true</span>);</div><div class="line">vLayout-&gt;at&lt;<a class="code" href="classcanvascv_1_1Button.html">Button</a>&gt;(2)-&gt;setStretchX(<span class="keyword">true</span>);</div><div class="line"></div><div class="line"><span class="comment">// ...</span></div></div><!-- fragment --> Notes:</li>
<li>Notice how we can access the items in a layout by their index.</li>
<li>Again - <a class="el" href="classcanvascv_1_1Widget.html#a7cdddebd755c499712793f727a057733" title="set if the Layout we&#39;re in should stretch us in the X direction (and calls setStretchXToParent(false)...">canvascv::Widget::setStretchX()</a> and <a class="el" href="classcanvascv_1_1Widget.html#a3ef50b76d33c332cea4e632346b6df33" title="set if the Layout we&#39;re in should stretch us in the Y direction (and calls setStretchYToParent(false)...">canvascv::Widget::setStretchY()</a> will stretch self to size of the largest widget in our layout.</li>
<li>Now the buttons have the same length: <div class="image">
<img src="tut_layout_buttons2.jpg" alt="tut_layout_buttons2.jpg"/>
</div>
 <br />
</li>
</ul>
<h1><a class="anchor" id="layouts_s3"></a>
A full dialog</h1>
<p>Now it's time to take all the widgets we've been talking about in the tutorials and make a dialog frame for our user.</p>
<p>As always it's going to be displayed on an image, but this time we'll make sure the image size fits into the screen. Since OpenCV doesn't expose the desktop size, we'll hard code a rough estimation of 1024x768 maximum size.</p>
<ul>
<li>The dialog will be in a <em>VFrame</em>.<ul>
<li>top - title in a <em>RAISED</em> VFrame/HFrame</li>
<li>bottom - body in a <em>HFrame</em> - split into 2 horizontal parts:<ul>
<li>Left part will have a <em>SUNKEN</em> VFrame with<ul>
<li><em>RadioButtons</em></li>
<li><em>CheckBoxes</em></li>
</ul>
</li>
<li>Right part will have a <em>VFrame</em> with<ul>
<li><em>HFrame</em> with <em>Text</em> to display the user's <em>RadioButtons</em> and <em>CheckBoxes</em> selections</li>
<li><em>HorizontalLayout</em> with "Reset"/"Cancel"/"Ok" buttons (aligned to <em>BOTTOM</em>)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;canvascv/canvas.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/button.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/hframe.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/vframe.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/radiobuttons.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/checkboxes.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/text.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> buildDemoDialog(<a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> &amp;c)</div><div class="line">{</div><div class="line">    <span class="keyword">auto</span> topFrame = VFrame::create(c, {100,100});</div><div class="line">    <span class="keyword">auto</span> titleFrame = VFrame::create(*topFrame);</div><div class="line">    <span class="keyword">auto</span> bodyFrame = HFrame::create(*topFrame);</div><div class="line">    <span class="keyword">auto</span> leftBodyFrame = VFrame::create(*bodyFrame);</div><div class="line">    <span class="keyword">auto</span> rightBodyFrame = VFrame::create(*bodyFrame);</div><div class="line">    <span class="keyword">auto</span> textInfoFrame = HFrame::create(*rightBodyFrame);</div><div class="line">    <span class="keyword">auto</span> buttonsLayout = HorizontalLayout::create(*rightBodyFrame);</div><div class="line"></div><div class="line">    leftBodyFrame-&gt;setFrameRelief(Widget::SUNKEN);</div><div class="line">    textInfoFrame-&gt;setFrameRelief(Widget::SUNKEN);</div><div class="line"></div><div class="line">    <span class="comment">// The title frame and body frame adapt to each other width</span></div><div class="line">    titleFrame-&gt;setStretchX(<span class="keyword">true</span>);</div><div class="line">    bodyFrame-&gt;setStretchX(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    rightBodyFrame-&gt;setStretchY(<span class="keyword">true</span>);</div><div class="line"></div><div class="line">    <span class="comment">// Adjust to titleFrame width and put the text at the center</span></div><div class="line">    <span class="keyword">auto</span> title = Text::create(*titleFrame, <span class="stringliteral">&quot;Dialog title goes here&quot;</span>, Widget::CENTER);</div><div class="line">    title-&gt;setStretchXToParent(<span class="keyword">true</span>);</div><div class="line">    title-&gt;setAlpha(0);</div><div class="line">    titleFrame-&gt;setFrameRelief(Widget::RAISED);</div><div class="line"></div><div class="line">    shared_ptr&lt;Text&gt; textInfo = Text::create(*textInfoFrame, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line">    shared_ptr&lt;RadioButtons&gt; radioButtons = RadioButtons::create(*leftBodyFrame, {<span class="stringliteral">&quot;RBOption1&quot;</span>, <span class="stringliteral">&quot;RBOption2&quot;</span>}, 0);</div><div class="line">    shared_ptr&lt;CheckBoxes&gt; checkBoxes = CheckBoxes::create(*leftBodyFrame, {<span class="stringliteral">&quot;CBOption1&quot;</span>, <span class="stringliteral">&quot;CBOption2&quot;</span>, <span class="stringliteral">&quot;CBOption3&quot;</span>});</div><div class="line"></div><div class="line">    <span class="comment">// The same callback will be used for several widgets</span></div><div class="line">    <a class="code" href="classcanvascv_1_1Widget.html#a977cbd39cf203c5866f07f3645c7e4bc">Widget::CBUserSelection</a> cb = [textInfo, radioButtons, checkBoxes](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a>*,int)</div><div class="line">    {</div><div class="line">        stringstream s;</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; checkBoxes-&gt;size(); ++i)</div><div class="line">            s &lt;&lt; <span class="stringliteral">&quot;CheckBox option &#39;&quot;</span> &lt;&lt; checkBoxes-&gt;<a class="code" href="classcanvascv_1_1CheckBoxes.html#a1ca004ddd840090415924b1f79b2ee47">getTextAt</a>(i) &lt;&lt; <span class="stringliteral">&quot;&#39; is &quot;</span> &lt;&lt; checkBoxes-&gt;isChecked(i) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line">        s &lt;&lt; <span class="stringliteral">&quot;RadioButtons selection is &#39;&quot;</span> &lt;&lt; radioButtons-&gt;getTextAt(radioButtons-&gt;getSelection())&lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div><div class="line">        textInfo-&gt;setText(s.str());</div><div class="line">    };</div><div class="line"></div><div class="line">    cb(0,0); <span class="comment">// manually initialize the textInfo by invoking the callback</span></div><div class="line">    textInfo-&gt;setAlpha(0);</div><div class="line"></div><div class="line">    radioButtons-&gt;setUserCB(cb);</div><div class="line">    checkBoxes-&gt;setUserCB(cb);</div><div class="line"></div><div class="line">    Button::create(*buttonsLayout, <span class="stringliteral">&quot;Reset&quot;</span>)-&gt;onPress([radioButtons, checkBoxes](Widget *)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; checkBoxes-&gt;size(); ++i)</div><div class="line">            checkBoxes-&gt;setChecked(i, <span class="keyword">false</span>);</div><div class="line">        radioButtons-&gt;setSelection(0);</div><div class="line">    });</div><div class="line">    Button::create(*buttonsLayout, <span class="stringliteral">&quot;Cancel&quot;</span>);</div><div class="line">    Button::create(*buttonsLayout, <span class="stringliteral">&quot;Ok&quot;</span>);</div><div class="line">    buttonsLayout-&gt;setStretchYToParent(<span class="keyword">true</span>);</div><div class="line">    buttonsLayout-&gt;setLayoutAnchor(Widget::CENTER);</div><div class="line">    buttonsLayout-&gt;doForAll([](Widget *w)</div><div class="line">    {</div><div class="line">        w-&gt;<a class="code" href="classcanvascv_1_1Widget.html#a7cdddebd755c499712793f727a057733">setStretchX</a>(<span class="keyword">true</span>);</div><div class="line">        w-&gt;<a class="code" href="classcanvascv_1_1Widget.html#a7180ca0054874c853e805e7842741596">setLayoutAnchor</a>(Widget::BOTTOM);</div><div class="line">    }, 1, <span class="keyword">false</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    Mat image;</div><div class="line">    <span class="keywordflow">if</span> (argc)</div><div class="line">    {</div><div class="line">        Mat orig = imread(argv[0]);</div><div class="line">        <span class="keywordflow">if</span> (orig.empty())</div><div class="line">        {</div><div class="line">            Canvas::fatal(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -1);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (orig.cols &gt; 1024)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">double</span> ratio = 1024. / orig.cols;</div><div class="line">            cv::resize(orig, image, Size(), ratio, ratio);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            image = orig;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -2);</div><div class="line">    }</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;Dialog&quot;</span>, WINDOW_AUTOSIZE); <span class="comment">// disable mouse resize</span></div><div class="line">    moveWindow(<span class="stringliteral">&quot;Dialog&quot;</span>, 10, 10); <span class="comment">// optional - some control on window position</span></div><div class="line">    <a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;Dialog&quot;</span>, image.size());</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#acf6e5d4b40aec610b0dc8c4f6bf93ac1">setMouseCallback</a>();</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a402c43a42c0089c48a96e5303c1c1fe8">enableStatusMsg</a>();</div><div class="line"></div><div class="line">    buildDemoDialog(c);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a441c5882c7ebebd454a306b3c3478ae7">setImage</a>(image);</div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        key = c.<a class="code" href="classcanvascv_1_1Canvas.html#a59397db05f5d9e45264f626f6a2ae528">waitKeyEx</a>(); <span class="comment">// GUI and callbacks happen here</span></div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>);</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Notes:</p><ul>
<li>Creating the frames and layouts first is recommended. Everything is inserted into them after that.</li>
<li>We're using the same callback here for handling changes in the <em>CheckBoxes</em> and <em>RadioButtons</em>.</li>
<li>Since widgets are layered on top of each other, you might want to make some of the widget transparent, by using <a class="el" href="classcanvascv_1_1Widget.html#a4c16525b31e70acd43372af0c1e60d42" title="set the alpha value used for the widge background [0,255] =&gt; [transparent,opaque] ...">canvascv::Widget::setAlpha()</a>.</li>
<li>You can perform actions recursively on <em>CompoundWidgets</em> with <a class="el" href="classcanvascv_1_1CompoundWidget.html#aa7d0f488468fca5707aa49ea35e9c67e" title="doForAll ">canvascv::CompoundWidget::doForAll()</a>.</li>
<li>This is what you should get: <div class="image">
<img src="tut_layout_dialog.jpg" alt="tut_layout_dialog.jpg"/>
</div>
 <br />
</li>
</ul>
<p><b>That's all for this tutorial</b> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
