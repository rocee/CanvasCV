---
layout: reference
sitemap: false
---
<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtmlcharset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CanvasCV: example_add_widget.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px">
  <td id="projectalign" style="padding-left: 0.5em">
   <div id="projectname">CanvasCV
   &#160<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">example_add_widget.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This is an example of how to add a widget.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;canvascv/canvas.h&quot;</span></div><div class="line"></div><div class="line"><span class="comment">// These are used to create widgets</span></div><div class="line"><span class="preprocessor">#include &quot;canvascv/widgets/text.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;canvascv/widgets/button.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;canvascv/widgets/hframe.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;canvascv/widgets/vframe.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;canvascv/widgets/widgetfactory.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;opencv2/highgui.hpp&gt;</span></div><div class="line"></div><div class="line"><span class="comment">// This was integrated into c++17, but experimental in c++11,</span></div><div class="line"><span class="comment">//  which is currently our minimum version</span></div><div class="line"><span class="preprocessor">#include &lt;experimental/filesystem&gt;</span></div><div class="line"><span class="keyword">namespace </span>fs = std::experimental::filesystem;</div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keyword">class </span>FileBrowser : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classcanvascv_1_1CompoundWidget.html">CompoundWidget</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keyword">static</span> std::shared_ptr&lt;FileBrowser&gt; create(<a name="_a1"></a><a class="code" href="classcanvascv_1_1Layout.html">Layout</a> &amp;layoutVal,</div><div class="line">                                               <span class="keyword">const</span> std::string &amp;startPath,</div><div class="line">                                               <a class="code" href="classcanvascv_1_1Widget.html#a977cbd39cf203c5866f07f3645c7e4bc">Widget::CBUserSelection</a> cbUserSelection = <a class="code" href="classcanvascv_1_1Widget.html#a977cbd39cf203c5866f07f3645c7e4bc">Widget::CBUserSelection</a>(),</div><div class="line">                                               <span class="keyword">const</span> cv::Point &amp;pos = cv::Point(-1,-1))</div><div class="line">    {</div><div class="line">        shared_ptr&lt;FileBrowser&gt; fb = <a name="_a2"></a><a class="code" href="classcanvascv_1_1WidgetFactoryT.html">WidgetFactoryT&lt;FileBrowser&gt;::newWidget</a>(layoutVal, pos);</div><div class="line">        fb-&gt;setCurrentPath(startPath);</div><div class="line">        fb-&gt;userCB = cbUserSelection;</div><div class="line">        <span class="keywordflow">return</span> fb;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">string</span> getCurrentPath()<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> currentPath;</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> setCurrentPath(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;value)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (currentPath != value)</div><div class="line">        {</div><div class="line">            currentPath = value;</div><div class="line">            setDirty();</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *getType()<span class="keyword"> const </span>{<span class="keywordflow">return</span> type;}</div><div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *type;</div><div class="line"></div><div class="line">    <span class="keywordtype">string</span> getUserSelection()<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> userSelection;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line">    <span class="keyword">friend</span> <span class="keyword">class </span><a name="_a3"></a><a class="code" href="classcanvascv_1_1WidgetFactory.html">canvascv::WidgetFactory</a>;</div><div class="line">    <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt; <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classcanvascv_1_1WidgetFactoryT.html">canvascv::WidgetFactoryT</a>;</div><div class="line"></div><div class="line">    FileBrowser(<span class="keyword">const</span> cv::Point &amp;pos)</div><div class="line">        : <a class="code" href="classcanvascv_1_1CompoundWidget.html">CompoundWidget</a>(pos)</div><div class="line">    {</div><div class="line">        top = <a name="a4"></a><a class="code" href="classcanvascv_1_1VFrame.html#a013de150c59b8f7f37aa21ac59d78b10">VFrame::create</a>(*<span class="keyword">this</span>, pos).get(); <span class="comment">// note the get()</span></div><div class="line">        top-&gt;setFrameRelief(RAISED);</div><div class="line">        top-&gt;setPadding(5);</div><div class="line">        pathFrame = <a name="a5"></a><a class="code" href="classcanvascv_1_1HFrame.html#a0bd1d3df07a8c25f48e79048913f85fc">HFrame::create</a>(*top).get(); <span class="comment">// note the get()</span></div><div class="line">        pathFrame-&gt;setFrameRelief(Widget::SELECTED);</div><div class="line">        pathFrame-&gt;setWrap(<span class="keyword">true</span>);</div><div class="line">        filesFrame = <a class="code" href="classcanvascv_1_1HFrame.html#a0bd1d3df07a8c25f48e79048913f85fc">HFrame::create</a>(*top).get(); <span class="comment">// note the get()</span></div><div class="line">        filesFrame-&gt;setFrameRelief(Widget::SELECTED);</div><div class="line">        filesFrame-&gt;setWrap(<span class="keyword">true</span>);</div><div class="line">        <span class="keyword">auto</span> okCancel = <a name="a6"></a><a class="code" href="classcanvascv_1_1HorizontalLayout.html#aea31dd787cbf985687ead6a55efa1839">HorizontalLayout::create</a>(*top);</div><div class="line">        okCancel-&gt;setLayoutAnchor(CENTER);</div><div class="line">        <a name="a7"></a><a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*okCancel, <span class="stringliteral">&quot;Cancel&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, [<span class="keyword">this</span>](<a name="_a8"></a><a class="code" href="classcanvascv_1_1Widget.html">Widget</a>*) {rmvFromLayout();});</div><div class="line">        <a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*okCancel, <span class="stringliteral">&quot;Ok&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, [<span class="keyword">this</span>](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a>*)</div><div class="line">        {</div><div class="line">            userSelection = currentPath;</div><div class="line">            <span class="keywordflow">if</span> (userCB) userCB(<span class="keyword">this</span>, 0);</div><div class="line">            rmvFromLayout();</div><div class="line">        });</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> recalcCompound()</div><div class="line">    {</div><div class="line">        fs::path pathObj(getCurrentPath());</div><div class="line">        <span class="keywordflow">if</span> (fs::is_directory(pathObj) &amp;&amp;</div><div class="line">                currentDir != pathObj.string())</div><div class="line">        {</div><div class="line">            <span class="keywordflow">for</span> (<span class="keyword">auto</span> f : files) { f-&gt;rmvFromLayout(); }</div><div class="line">            files.clear();</div><div class="line">            currentDir = pathObj.string();</div><div class="line">            <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; p: fs::directory_iterator(getCurrentPath()))</div><div class="line">            {</div><div class="line">                <span class="keywordflow">if</span> (fs::is_directory(p))</div><div class="line">                {</div><div class="line">                    <a name="_a9"></a><a class="code" href="classcanvascv_1_1Button.html">Button</a> *dir = <a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*filesFrame, p.path().filename().string()).<span class="keyword">get</span>();</div><div class="line">                    dir-&gt;<a name="a10"></a><a class="code" href="classcanvascv_1_1Widget.html#abdb1aed0ca76845ba6a56c4f8db502c9">notifyOnChange</a>([<span class="keyword">this</span>, p](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a> *, <a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8">Widget::State</a> state) {</div><div class="line">                        <span class="keywordflow">if</span> (state == <a name="a11"></a><a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8abb395c6efa7fc11a3176d1f801bdbc86">Widget::PRESS</a>) {</div><div class="line">                            setCurrentPath(p.path().string());</div><div class="line">                        }</div><div class="line">                    });</div><div class="line">                    files.push_back(dir);</div><div class="line">                }</div><div class="line">                <span class="keywordflow">else</span></div><div class="line">                {</div><div class="line">                    <a class="code" href="classcanvascv_1_1Button.html">Button</a> *file = <a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*filesFrame, p.path().filename().string()).<span class="keyword">get</span>();</div><div class="line">                    file-&gt;<a name="a12"></a><a class="code" href="classcanvascv_1_1Button.html#a7d2c79daa9d22bf02c2cc978ff10df7e">setFlatButton</a>();</div><div class="line">                    file-&gt;<a class="code" href="classcanvascv_1_1Widget.html#abdb1aed0ca76845ba6a56c4f8db502c9">notifyOnChange</a>([<span class="keyword">this</span>, p](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a> *, <a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8">Widget::State</a> state) {</div><div class="line">                        <span class="keywordflow">if</span> (state == <a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8abb395c6efa7fc11a3176d1f801bdbc86">Widget::PRESS</a>) {</div><div class="line">                            setCurrentPath(p.path().string());</div><div class="line">                        }</div><div class="line">                    });</div><div class="line">                    files.push_back(file);</div><div class="line">                }</div><div class="line">            }</div><div class="line">        }</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> b : path) { b-&gt;rmvFromLayout(); }</div><div class="line">        path.clear();</div><div class="line">        list&lt;fs::path&gt; parts;</div><div class="line">        <span class="keywordflow">do</span></div><div class="line">        {</div><div class="line">            parts.push_front(pathObj);</div><div class="line">            pathObj = pathObj.parent_path();</div><div class="line">        } <span class="keywordflow">while</span> (pathObj.string().length());</div><div class="line">        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;p : parts)</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (fs::is_directory(p))</div><div class="line">            {</div><div class="line">                <a class="code" href="classcanvascv_1_1Button.html">Button</a> *dir = <a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*pathFrame, p.filename().string()).<span class="keyword">get</span>();</div><div class="line">                dir-&gt;<a class="code" href="classcanvascv_1_1Widget.html#abdb1aed0ca76845ba6a56c4f8db502c9">notifyOnChange</a>([<span class="keyword">this</span>, p](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a> *, <a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8">Widget::State</a> state) {</div><div class="line">                    <span class="keywordflow">if</span> (state == <a class="code" href="classcanvascv_1_1Widget.html#afc39a6533455cbc3161ae3a021da0dc8abb395c6efa7fc11a3176d1f801bdbc86">Widget::PRESS</a>) {</div><div class="line">                        setCurrentPath(p.string());</div><div class="line">                    }</div><div class="line">                });</div><div class="line">                path.push_back(dir);</div><div class="line">            }</div><div class="line">            <span class="keywordflow">else</span></div><div class="line">            {</div><div class="line">                <a class="code" href="classcanvascv_1_1Button.html">Button</a> *file = <a class="code" href="classcanvascv_1_1Button.html#a3557ea02dfca8d6cb92181a2d2b88112">Button::create</a>(*pathFrame, p.filename().string()).<span class="keyword">get</span>();</div><div class="line">                file-&gt;<a class="code" href="classcanvascv_1_1Button.html#a7d2c79daa9d22bf02c2cc978ff10df7e">setFlatButton</a>();</div><div class="line">                path.push_back(file);</div><div class="line">            }</div><div class="line">        }</div><div class="line">        top-&gt;update(); <span class="comment">// Since we&#39;re making widgets dirty in recalc*() we need to manually update them</span></div><div class="line">        recalcRect(0);</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    CBUserSelection userCB;</div><div class="line">    fs::path currentDir;</div><div class="line">    <span class="keywordtype">string</span> currentPath;</div><div class="line">    <span class="keywordtype">string</span> userSelection;</div><div class="line"></div><div class="line">    <span class="comment">// It&#39;s enough to keep pointers.</span></div><div class="line">    <span class="comment">// The layout is holding the smart pointers,</span></div><div class="line">    <span class="comment">//  and that&#39;s keeping the reference count up.</span></div><div class="line">    <a name="_a13"></a><a class="code" href="classcanvascv_1_1VFrame.html">VFrame</a> *top;</div><div class="line">    <a name="_a14"></a><a class="code" href="classcanvascv_1_1HFrame.html">HFrame</a> *pathFrame;</div><div class="line">    list&lt;Button*&gt; path;</div><div class="line">    <a class="code" href="classcanvascv_1_1HFrame.html">HFrame</a> *filesFrame;</div><div class="line">    list&lt;Button*&gt; files;</div><div class="line">};</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *FileBrowser::type = <span class="stringliteral">&quot;FileBrowser&quot;</span>;</div><div class="line"></div><div class="line">CCV_REGISTER_WIDGET(FileBrowser);</div><div class="line"></div><div class="line"><span class="keyword">static</span> Mat readImg(<span class="keyword">const</span> <span class="keywordtype">string</span> &amp;name)</div><div class="line">{</div><div class="line">    Mat image;</div><div class="line">    Mat orig = imread(name, IMREAD_UNCHANGED);</div><div class="line">    <span class="keywordflow">if</span> (! orig.empty())</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (orig.cols &gt; 1024)</div><div class="line">        {</div><div class="line">            <span class="keywordtype">double</span> ratio = 1024. / orig.cols;</div><div class="line">            cv::resize(orig, image, Size(), ratio, ratio);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            image = orig;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> image;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    Mat image;</div><div class="line">    <span class="keywordflow">if</span> (argc)</div><div class="line">    {</div><div class="line">        image = readImg(argv[0]);</div><div class="line">        <span class="keywordflow">if</span> (image.empty())</div><div class="line">        {</div><div class="line">            <a name="a15"></a><a class="code" href="classcanvascv_1_1Canvas.html#add93c0d5cc1e9b49f97510952a8a1961">Canvas::fatal</a>(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -1);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        <a class="code" href="classcanvascv_1_1Canvas.html#add93c0d5cc1e9b49f97510952a8a1961">Canvas::fatal</a>(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -1);</div><div class="line">    }</div><div class="line"></div><div class="line">    fs::path startPath(argv[0]);</div><div class="line">    startPath = startPath.parent_path();</div><div class="line"></div><div class="line">    <a name="_a16"></a><a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;Canvas&quot;</span>, image.size());</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;Canvas&quot;</span>, WINDOW_AUTOSIZE);</div><div class="line">    c.setMouseCallback(); <span class="comment">// optional for mouse usage see also (example_selectbox.cpp)</span></div><div class="line"></div><div class="line">    shared_ptr&lt;FileBrowser&gt; fb;</div><div class="line">    <a class="code" href="classcanvascv_1_1Widget.html#a977cbd39cf203c5866f07f3645c7e4bc">Widget::CBUserSelection</a> cb = [&amp;c, &amp;image](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a> *w, int)</div><div class="line">    {</div><div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;CB: Got user selection &#39;&quot;</span> &lt;&lt; ((FileBrowser*)w)-&gt;getUserSelection() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line">        Mat tmp = readImg(((FileBrowser*)w)-&gt;getUserSelection());</div><div class="line">        <span class="keywordflow">if</span> (tmp.empty())</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;OpenCV cannot read this image&quot;</span> &lt;&lt; endl;</div><div class="line">        }</div><div class="line">        <span class="keywordflow">else</span></div><div class="line">        {</div><div class="line">            image = tmp;</div><div class="line">            c.setSize(image.size());</div><div class="line">        }</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> delay = 1000/25; <span class="comment">// if using a polling API we need a delay</span></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    Mat out; <span class="comment">// keeping it out of the loop is a little more efficient</span></div><div class="line">    <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (! fb)</div><div class="line">        {</div><div class="line">            fb = FileBrowser::create(c, startPath.string(), cb);</div><div class="line">            fb-&gt;setFillColor(<a name="a17"></a><a class="code" href="classcanvascv_1_1Colors.html#acabb2042568dac2c0fbefcc92b48be0b">Colors::RoyalBlue</a>);</div><div class="line">            fb-&gt;setAlpha(128);</div><div class="line">        }</div><div class="line">        c.redrawOn(image, out);</div><div class="line">        imshow(<span class="stringliteral">&quot;Canvas&quot;</span>, out);</div><div class="line">        key = c.waitKeyEx(delay); <span class="comment">// GUI and callbacks happen here</span></div><div class="line">        <span class="keywordflow">if</span> (fb-&gt;getUserSelection().length())</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Loop: Got user selection &#39;&quot;</span> &lt;&lt; fb-&gt;getUserSelection() &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;Starting a new FileBrowser&quot;</span> &lt;&lt; endl;</div><div class="line">            startPath = fb-&gt;getUserSelection();</div><div class="line">            <span class="keywordflow">if</span> (! fs::is_directory(startPath)) startPath = startPath.parent_path();</div><div class="line">            fb = FileBrowser::create(c, startPath.string(), cb);</div><div class="line">            fb-&gt;setFillColor(<a class="code" href="classcanvascv_1_1Colors.html#acabb2042568dac2c0fbefcc92b48be0b">Colors::RoyalBlue</a>);</div><div class="line">            fb-&gt;setAlpha(128);</div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (fb-&gt;isRemoved() &amp;&amp; ! fb-&gt;getUserSelection().length())</div><div class="line">        {</div><div class="line">            cout &lt;&lt; <span class="stringliteral">&quot;User canceled&quot;</span> &lt;&lt; endl;</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Jul 8 2017 22:56:26 for CanvasCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
