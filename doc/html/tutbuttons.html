---
layout: reference
sitemap: false
---
<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtmlcharset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CanvasCV: Using buttons</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px">
  <td id="projectalign" style="padding-left: 0.5em">
   <div id="projectname">CanvasCV
   &#160<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Using buttons </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#buttons_s1">Resizing the image with buttons</a></li>
<li class="level1"><a href="#buttons_s2">Text alignment with buttons</a></li>
</ul>
</div>
<div class="textblock"><p>A <em>Button</em> is one of the most a basic widgets.</p>
<p>It changes its contour when pressed (according to the current <a class="el" href="classcanvascv_1_1Theme.html" title="The Theme controls appearance of widgets and shapes. ">canvascv::Theme</a>).</p>
<p>It has text displayed on it and you attach a callback to know when it was pressed.</p>
<h1><a class="anchor" id="buttons_s1"></a>
Resizing the image with buttons</h1>
<p>Up to now we've been using WINDOW_AUTOSIZE to avoid stretching the image when creating the window.</p>
<p>Let's write a small program which allows resizing of the image.</p>
<p>This will be done with 2 buttons "+" and "-" to increse and decrease the size of the image respectively.</p>
<p>Here we also make an effort to keep a button location aligned to a changing Canvas size. This won't be needed when you'll learn about the layout managers.</p>
<p>Read the code and see the notes after it:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;canvascv/canvas.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/button.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    <span class="keywordflow">if</span> (! argc)</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -1);</div><div class="line">    }</div><div class="line"></div><div class="line">    Mat orig = imread(argv[0]);</div><div class="line">    <span class="keywordflow">if</span> (orig.empty())</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -2);</div><div class="line">    }</div><div class="line">    Mat image = orig;</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;Buttons&quot;</span>, WINDOW_AUTOSIZE); <span class="comment">// disable mouse resize</span></div><div class="line">    <a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;Buttons&quot;</span>, orig.size());</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a402c43a42c0089c48a96e5303c1c1fe8">enableStatusMsg</a>(); <span class="comment">// shows hover over button msgs</span></div><div class="line">    c.setMouseCallback();</div><div class="line"></div><div class="line">    <span class="keywordtype">double</span> ratio = 1.;</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> rightSideButton = Button::create(c,                                 <span class="comment">// on the canvas</span></div><div class="line">                                          Point(image.cols - 20, 0),         <span class="comment">// top-right aligned on the screen</span></div><div class="line">                                          <span class="stringliteral">&quot;+&quot;</span>,                               <span class="comment">// displayed on button</span></div><div class="line">                                          <span class="stringliteral">&quot;increase size&quot;</span>,                   <span class="comment">// displayed during mouse hover</span></div><div class="line">                                          [&amp;c, &amp;orig, &amp;image, &amp;ratio](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a> *w) <span class="comment">// callback can be a C++11 lambda</span></div><div class="line">    {</div><div class="line">        ratio += 0.05;</div><div class="line">        cv::resize(orig, image, Size(), ratio, ratio);</div><div class="line">        c.setImage(image);  <span class="comment">// change the image during waitKeyEx(0)</span></div><div class="line">        w-&gt;setLocation(Point(image.cols - 20, 0)); <span class="comment">// keep aligned to top right without a layout manager</span></div><div class="line">    }</div><div class="line">    );</div><div class="line"></div><div class="line">    Button::create(c,                               <span class="comment">// on the canvas</span></div><div class="line">                   Point(0, 0),                     <span class="comment">// top-left aligned on the screen</span></div><div class="line">                   <span class="stringliteral">&quot;-&quot;</span>,                             <span class="comment">// displayed on button</span></div><div class="line">                   <span class="stringliteral">&quot;decrease size&quot;</span>,                 <span class="comment">// displayed during mouse hover</span></div><div class="line">                   [&amp;c, &amp;orig, &amp;image, &amp;ratio, rightSideButton](<a class="code" href="classcanvascv_1_1Widget.html">Widget</a>*) <span class="comment">// callback can be a C++11 lambda</span></div><div class="line">    {</div><div class="line">        ratio -= 0.05;</div><div class="line">        cv::resize(orig, image, Size(), ratio, ratio);</div><div class="line">        c.setImage(image);  <span class="comment">// change the image during waitKeyEx(0)</span></div><div class="line">        rightSideButton-&gt;setLocation(Point(image.cols - 20, 0)); <span class="comment">// keep aligned to top right without a layout manager</span></div><div class="line">    }</div><div class="line">    );</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    Mat out;</div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        c.redrawOn(image, out);  <span class="comment">// draw the canvas on the image copy</span></div><div class="line">        c.imshow(out);</div><div class="line">        key = c.waitKeyEx(); <span class="comment">// GUI and callbacks happen here</span></div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>);</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Notes:</p><ul>
<li>We only need a variable to widgets we want to acces by code, so only the <em>rightSideButton</em> has a variable, since we're manually aligning it to the right on resizing.</li>
<li>For a single image display, the best practice is to use <a class="el" href="classcanvascv_1_1Canvas.html#a59397db05f5d9e45264f626f6a2ae528" title="waitKeyEx ">canvascv::Canvas::waitKeyEx()</a> (default delay is 0).<ul>
<li>Since during a zero delay, the Canvas is self updating, it needs to know that the image has changed, and this is what <a class="el" href="classcanvascv_1_1Canvas.html#a441c5882c7ebebd454a306b3c3478ae7" title="setImage ">canvascv::Canvas::setImage()</a> is for.</li>
</ul>
</li>
<li>We're using <em>enableStatusMsg</em> since we want the mouse hover over the buttons to show our status message for it.</li>
<li>This tutorial is using C++11 lambda expressions as callbacks, but anything which has the "void(Widget*)" signature will work here.</li>
<li>Here is an image decreased by this code: <div class="image">
<img src="tut_buttons.jpg" alt="tut_buttons.jpg"/>
</div>
 <br />
</li>
</ul>
<h1><a class="anchor" id="buttons_s2"></a>
Text alignment with buttons</h1>
<p>This will be more relevant on the <em>layout managers</em> tutorial, later on.</p>
<p>Currently, lets assume we have a button with 2 lines of text, a short line and below it a long line.</p>
<p>We could want the text to be centered, or aligned to left, or aligned to right.</p>
<p>The way to do this is with anchoring to the flow. If you set your anchor at some point, then the text can't move the anchor and flows to the other side. By doing that, it is aligned to the anchored side.</p>
<p>See this code: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;canvascv/canvas.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;canvascv/widgets/button.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecv.html">cv</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacecanvascv.html">canvascv</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div><div class="line">{</div><div class="line">    --argc;</div><div class="line">    ++argv;</div><div class="line">    <span class="keywordflow">if</span> (! argc)</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="stringliteral">&quot;Must get a path to an image as a parameter&quot;</span> , -1);</div><div class="line">    }</div><div class="line"></div><div class="line">    Mat image = imread(argv[0]);</div><div class="line">    <span class="keywordflow">if</span> (image.empty())</div><div class="line">    {</div><div class="line">        Canvas::fatal(<span class="keywordtype">string</span>(<span class="stringliteral">&quot;Cannot load image &quot;</span>) + argv[0], -2);</div><div class="line">    }</div><div class="line"></div><div class="line">    namedWindow(<span class="stringliteral">&quot;ButTextAlign&quot;</span>, WINDOW_AUTOSIZE); <span class="comment">// disable mouse resize</span></div><div class="line">    <a class="code" href="classcanvascv_1_1Canvas.html">Canvas</a> c(<span class="stringliteral">&quot;ButTextAlign&quot;</span>, image.size());</div><div class="line">    c.<a class="code" href="classcanvascv_1_1Canvas.html#a402c43a42c0089c48a96e5303c1c1fe8">enableStatusMsg</a>(); <span class="comment">// shows hover over button msgs</span></div><div class="line">    c.setMouseCallback();</div><div class="line"></div><div class="line">    <span class="keywordtype">string</span> buttonText = <span class="stringliteral">&quot;short\n&quot;</span></div><div class="line">                        <span class="stringliteral">&quot;a longer line&quot;</span>;</div><div class="line">    <span class="keyword">auto</span> b1 = Button::create(c,               <span class="comment">// on the canvas</span></div><div class="line">                             Point(10,10),    <span class="comment">// top-right aligned on the screen</span></div><div class="line">                             buttonText,      <span class="comment">// displayed on button</span></div><div class="line">                             <span class="stringliteral">&quot;centered&quot;</span>);     <span class="comment">// displayed during mouse hover</span></div><div class="line">    b1-&gt;setFlowAnchor(Widget::CENTER);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> b2 = Button::create(c,               <span class="comment">// on the canvas</span></div><div class="line">                             Point(10,110),    <span class="comment">// top-right aligned on the screen</span></div><div class="line">                             buttonText,      <span class="comment">// displayed on button</span></div><div class="line">                             <span class="stringliteral">&quot;left aligned&quot;</span>); <span class="comment">// displayed during mouse hover</span></div><div class="line">    b2-&gt;setFlowAnchor(Widget::LEFT);</div><div class="line"></div><div class="line">    <span class="keyword">auto</span> b3 = Button::create(c,               <span class="comment">// on the canvas</span></div><div class="line">                             Point(10,210),    <span class="comment">// top-right aligned on the screen</span></div><div class="line">                             buttonText,      <span class="comment">// displayed on button</span></div><div class="line">                             <span class="stringliteral">&quot;right aligned&quot;</span>);<span class="comment">// displayed during mouse hover</span></div><div class="line">    b3-&gt;setFlowAnchor(Widget::RIGHT);</div><div class="line"></div><div class="line">    <span class="keywordtype">int</span> key = 0;</div><div class="line">    Mat out;</div><div class="line">    <span class="keywordflow">do</span></div><div class="line">    {</div><div class="line">        c.redrawOn(image, out);  <span class="comment">// draw the canvas on the image copy</span></div><div class="line">        c.imshow(out);</div><div class="line">        key = c.waitKeyEx(); <span class="comment">// GUI and callbacks happen here</span></div><div class="line"></div><div class="line">    } <span class="keywordflow">while</span> (key != <span class="charliteral">&#39;q&#39;</span>);</div><div class="line"></div><div class="line">    destroyAllWindows();</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div></div><!-- fragment --><p> Notes:</p><ul>
<li>the <a class="el" href="classcanvascv_1_1Widget.html#a69f455f7fbf67f636ee1155795057b87" title="setFlowAnchor set internal widget alignment and direction of growth ">canvascv::Widget::setFlowAnchor()</a> does the work here.</li>
<li>Here is a possible outcome this code: <div class="image">
<img src="tut_buttons_txt_alignment.jpg" alt="tut_buttons_txt_alignment.jpg"/>
</div>
 <br />
</li>
</ul>
<p><b>That's all for this tutorial</b> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
